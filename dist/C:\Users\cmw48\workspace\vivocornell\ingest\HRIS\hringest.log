2013-05-23 10:04:49,424 IngestMain  INFO- Entering application.
2013-05-23 10:04:49,736 IngestMain DEBUG- no commandline args.
2013-05-23 10:04:49,737 IngestMain  INFO- Loading active HR persons from most recent file...
2013-05-23 10:04:50,081 ReadWrite  INFO-  Successfully read in the nt data from ./rdfdump/allHRISActivePersonsURI.nt
2013-05-23 10:04:50,081 CreateModel  INFO- read in Model mdlAllVIVOPerson from file ./rdfdump/allHRISActivePersonsURI.nt
2013-05-23 10:04:50,082 CreateModel  INFO- querying VIVO service for a list of persons.  (wait time ~90 seconds)...
2013-05-23 10:04:50,082 CreateModel  INFO- creating VIVO model...
2013-05-23 10:04:50,082 CreateModel TRACE- using this query: 
#
# qStrAllVIVOPerson
# updated 120907
# returns all VIVO person URI
# where person has an core:hrJobTitle
# and a netID OR emplID
# modified 120917 - persons don't have hrJobTitle.  draws 22K+ names.

PREFIX hr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>
PREFIX cuvivo: <http://vivo.cornell.edu/individual/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX core: <http://vivoweb.org/ontology/core#>
PREFIX titlemap: <http://vivo.library.cornell.edu/ns/hr/titleMapping#>


CONSTRUCT { 
  ?vivoperson rdf:type foaf:Person .
    } 
WHERE {

# querying VIVO service
SERVICE <http://bailey.mannlib.cornell.edu:2520/sparql>
  {  
     #?vivoperson rdf:type foaf:Person .
     #must have a position to play
     ?vivoperson core:personInPosition ?position .  
     # must also have an emplId
     ?vivoperson hr:emplId ?emplId .
     # does the position have an end date?
     OPTIONAL { 
       ?position core:dateTimeInterval ?dti .
       ?dti core:end ?end .
       }
    #if the position doesn't have an end date, it's active.  
    FILTER ( (!BOUND (?end))  )
  }
}

2013-05-23 10:04:50,085 CreateModel TRACE- constructing New Model with #
# qStrAllVIVOPerson
# updated 120907
# returns all VIVO person URI
# where person has an core:hrJobTitle
# and a netID OR emplID
# modified 120917 - persons don't have hrJobTitle.  draws 22K+ names.

PREFIX hr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>
PREFIX cuvivo: <http://vivo.cornell.edu/individual/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX core: <http://vivoweb.org/ontology/core#>
PREFIX titlemap: <http://vivo.library.cornell.edu/ns/hr/titleMapping#>


CONSTRUCT { 
  ?vivoperson rdf:type foaf:Person .
    } 
WHERE {

# querying VIVO service
SERVICE <http://bailey.mannlib.cornell.edu:2520/sparql>
  {  
     #?vivoperson rdf:type foaf:Person .
     #must have a position to play
     ?vivoperson core:personInPosition ?position .  
     # must also have an emplId
     ?vivoperson hr:emplId ?emplId .
     # does the position have an end date?
     OPTIONAL { 
       ?position core:dateTimeInterval ?dti .
       ?dti core:end ?end .
       }
    #if the position doesn't have an end date, it's active.  
    FILTER ( (!BOUND (?end))  )
  }
}

2013-05-23 10:04:50,095 SystemUtils TRACE- Using thread classloader
2013-05-23 10:04:50,238 CreateModel TRACE- cm thread slowdown disabled...
2013-05-23 10:04:50,352 CreateModel ERROR- problem writing the new model!  ErrorHttpException: -404 Failed to connect to remote server
HttpException: -404 Failed to connect to remote server
	at com.hp.hpl.jena.sparql.engine.http.HttpQuery.execGet(HttpQuery.java:201)
	at com.hp.hpl.jena.sparql.engine.http.HttpQuery.exec(HttpQuery.java:144)
	at com.hp.hpl.jena.sparql.engine.http.Service.exec(Service.java:61)
	at com.hp.hpl.jena.sparql.engine.main.iterator.QueryIterService.nextStage(QueryIterService.java:36)
	at com.hp.hpl.jena.sparql.engine.iterator.QueryIterRepeatApply.makeNextStage(QueryIterRepeatApply.java:91)
	at com.hp.hpl.jena.sparql.engine.iterator.QueryIterRepeatApply.hasNextBinding(QueryIterRepeatApply.java:52)
	at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorBase.hasNext(QueryIteratorBase.java:66)
	at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorWrapper.hasNextBinding(QueryIteratorWrapper.java:28)
	at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorBase.hasNext(QueryIteratorBase.java:66)
	at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorWrapper.hasNextBinding(QueryIteratorWrapper.java:28)
	at com.hp.hpl.jena.sparql.engine.iterator.QueryIteratorBase.hasNext(QueryIteratorBase.java:66)
	at com.hp.hpl.jena.sparql.engine.QueryExecutionBase.execConstruct(QueryExecutionBase.java:117)
	at hrcode.CreateModel.MakeNewModelCONSTRUCT(Unknown Source)
	at hrcode.CreateModel.CreateAllVIVOPersonList(Unknown Source)
	at hrcode.IngestMain.main(Unknown Source)
2013-05-23 10:04:50,358 ReadWrite TRACE- rw thread slowdown enabled...
2013-05-23 10:04:50,460 CreateModel  INFO- querying VIVOsource and populating Model mdlAllVIVOPerson...
2013-05-23 10:04:50,461 IngestMain  INFO- created a list of 0 eligible persons in VIVO for update.  Iterating over results...
2013-05-23 10:04:50,461 IteratorMethods  INFO- generated a model of all VIVO uris that have either netId or HR emplId
2013-05-23 10:04:50,462 IteratorMethods  INFO- found a total of 0 persons.
2013-05-23 10:04:50,462 IteratorMethods  INFO- using UpdateVivoPerson to find additions and retractions.
2013-05-23 10:04:50,462 IteratorMethods DEBUG- finished with VIVO person update iterator. 

2013-05-23 10:04:50,462 IteratorMethods  INFO- done looking at all 0 VIVO persons.
2013-05-23 10:04:50,463 IteratorMethods  INFO- Unrecognized Titles: 

[]
2013-05-23 10:04:50,463 IngestMain  INFO- VIVO update complete.
