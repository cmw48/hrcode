#
# qStrVivoPosnForOnePerson.txt
# updated 140623 - updated for v1.6 and constrained to hr:WdPosition
# position type now "travels with" position statement
# using presence of DTI as filter (should use vivo:end, but it doesn't work)
# with person URI, 
# return all VIVO positions for a person
# TODO: removed graph specific check

PREFIX vivo: <http://vivoweb.org/ontology/core#> 

CONSTRUCT {

VARVALUE vivo:relatedBy ?position .
?position a hr:WdPosition .

}
WHERE
{
    # querying VIVO endpoint
  SERVICE <VIVOSERV>
    {
      ?position a hr:WdPosition .
      #GRAPH <http://vitro.mannlib.cornell.edu/default/vitro-kb-2> {
      VARVALUE vivo:relatedBy ?position .
      #OPTIONAL {?position vivo:dateTimeInterval ?dti. }
      #OPTIONAL {?dti vivo:end ?endDate . }
      #FILTER (!BOUND(?dti)) 
      # }
    } 
}
